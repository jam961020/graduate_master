# Session 26 Summary (2025-11-20)

## ì‹¤í—˜ ëª©í‘œ

Session 25ì—ì„œ ë°œê²¬í•œ ë¬¸ì œ í•´ê²°:
- **ë¬¸ì œ ì´ë¯¸ì§€ ì œê±°**: `WIN_20250604_14_32_45_Pro` (idx=85ì—ì„œ ë°˜ë³µì  score=0 ë°œìƒ)
- **ì¬ì‹¤í—˜ ì‹¤í–‰**: ë¬¸ì œ ì´ë¯¸ì§€ ì—†ì´ ê¹¨ë—í•œ ë°ì´í„°ë¡œ ì‹¤í—˜

---

## ë¬¸ì œ ì´ë¯¸ì§€ ì²˜ë¦¬

### ë¶„ì„ ê²°ê³¼
ë¡œê·¸ ë¶„ì„ìœ¼ë¡œ ë¬¸ì œ ì´ë¯¸ì§€ ì‹ë³„:
```bash
# logs/run_20251120_004752 ë¶„ì„
# ê²°ê³¼: idx=85 (WIN_20250604_14_32_45_Pro)ë§Œ score=0 ë°œìƒ (8íšŒ)
```

### í•´ê²° ë°©ë²•
**ì‚¬ìš©ìê°€ ì§ì ‘ ì´ë¯¸ì§€ ì‚­ì œ** â†’ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

ì²˜ìŒì—ëŠ” `EXCLUDE_INDICES` ë¡œì§ì„ ì¶”ê°€í–ˆìœ¼ë‚˜:
- Shuffle í›„ ì¸ë±ìŠ¤ê°€ ë³€ê²½ë˜ì–´ ë‹¤ë¥¸ ì´ë¯¸ì§€ê°€ ì œì™¸ë¨
- ì‚¬ìš©ìê°€ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì§ì ‘ ì‚­ì œ
- ì½”ë“œì—ì„œ ì œì™¸ ë¡œì§ ì œê±°í•˜ê³  ì¬ì‹¤í—˜

---

## ìƒˆ ì‹¤í—˜ ì‹œì‘ (run_20251120_151025)

### ì‹¤í—˜ ì„¤ì •
- **iterations**: 100
- **n_initial**: 10
- **alpha**: 0.3
- **n_w**: 15
- **max_images**: 600
- **threshold**: 20px (30px â†’ 20px, ë” ì—„ê²©í•œ í‰ê°€)

### ë°ì´í„°ì…‹
- **Train**: 600 images
- **Validation**: 246 images (saved to `validation_images.json`)
- **Total available**: 846 images (ë¬¸ì œ ì´ë¯¸ì§€ ì œê±° í›„)

---

## Initial Sampling ê²°ê³¼ âœ…

```
Init 1/10: CVaR=0.5852, mean=0.7904
Init 2/10: CVaR=0.4229, mean=0.7414
Init 3/10: CVaR=0.5503, mean=0.7837
Init 4/10: CVaR=0.4811, mean=0.7383
Init 5/10: CVaR=0.4422, mean=0.7448
Init 6/10: CVaR=0.3339, mean=0.7191
Init 7/10: CVaR=0.3275, mean=0.6908
Init 8/10: CVaR=0.2915, mean=0.7037
Init 9/10: CVaR=0.5522, mean=0.7643
Init 10/10: CVaR=0.3115, mean=0.7154

Initial best CVaR: 0.5852
```

### ì„±ëŠ¥ ë¶„ì„

**CVaR ë¶„í¬**:
- **ë²”ìœ„**: 0.29 ~ 0.59
- **Initial best**: 0.5852
- **ë³€ë™í­**: ì ë‹¹í•¨

**Mean ë¶„í¬**:
- **ë²”ìœ„**: 0.69 ~ 0.79
- **í‰ê· **: ~0.74

**ë¹„êµ (ì´ì „ ì‹¤í—˜ vs í˜„ì¬)**:

| Metric | Session 25 (30px) | Session 26 (20px) |
|--------|-------------------|-------------------|
| Threshold | 30px | 20px |
| Initial CVaR range | 0.32 - 0.70 | 0.29 - 0.59 |
| Initial best CVaR | 0.70 | 0.5852 |
| Score=0 ë°œìƒ | ìˆìŒ (idx=85) | ì—†ìŒ âœ… |

**ê²°ë¡ **:
- âœ… 20px thresholdë¡œ ë” ì—„ê²©í•œ í‰ê°€ ì ìš©
- âœ… Initial CVaRì´ ë‚®ì•„ì§ (ì˜ˆìƒëŒ€ë¡œ)
- âœ… ë¬¸ì œ ì´ë¯¸ì§€ ì œê±°ë¡œ ì•ˆì •ì ì¸ í‰ê°€
- âœ… Cumulative best ì ìš©ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ìˆ˜ë ´ ê·¸ë˜í”„ ì˜ˆìƒ

---

## í˜„ì¬ ìƒíƒœ

### ì‹¤í—˜ ì§„í–‰ ì¤‘ ğŸ”„
- **ë¡œê·¸ ë””ë ‰í† ë¦¬**: `logs/run_20251120_151025/`
- **ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤**: `2f4feb` (running)
- **Initial sampling**: âœ… ì™„ë£Œ
- **BO iterations**: ì§„í–‰ ì¤‘ (0/100)

### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **Total iterations**: 100
- **í‰ê°€ íšŸìˆ˜/iteration**: 15 (n_w)
- **ì´ë¯¸ì§€ë‹¹ í‰ê°€ ì‹œê°„**: ~1-2ì´ˆ
- **ì˜ˆìƒ ì´ ì‹œê°„**: ì•½ 25-50ë¶„

---

## ë‹¤ìŒ ì„¸ì…˜ TODO

### 1. ì‹¤í—˜ ê²°ê³¼ í™•ì¸
```bash
# ì‹¤í—˜ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
ls logs/run_20251120_151025/

# ìµœì¢… iteration í™•ì¸
ls logs/run_20251120_151025/iter_*.json | tail -5

# Best CVaR í™•ì¸
for f in logs/run_20251120_151025/iter_*.json; do
  python -c "import json; d=json.load(open('$f')); print(f'Iter {d[\"iteration\"]}: CVaR={d[\"cvar\"]:.4f}')"
done
```

### 2. ì‹œê°í™” ìƒì„±
- CVaR ìˆ˜ë ´ ê·¸ë˜í”„: `cvar_convergence.png`
- Best vs Current CVaR ë¹„êµ
- ìš”ë™ì´ ì¤„ì–´ë“¤ì—ˆëŠ”ì§€ í™•ì¸

### 3. ê²°ê³¼ ë¶„ì„
- **Initial CVaR**: 0.5852
- **Best CVaR**: ? (í™•ì¸ í•„ìš”)
- **Improvement**: ?
- **ëª©í‘œ**: 10% ì´ìƒ ê°œì„ 

### 4. Score=0 ì²´í¬
```bash
# Score=0 ë°œìƒ ì—¬ë¶€ í™•ì¸
grep -c "score=0" logs/run_20251120_151025/*.log

# ë°œìƒí–ˆë‹¤ë©´ ì–´ëŠ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸
python -c "
import json
from pathlib import Path
from collections import Counter

log_dir = Path('logs/run_20251120_151025')
zero_scores = Counter()

for f in sorted(log_dir.glob('iter_*.json')):
    with open(f) as fp:
        data = json.load(fp)
        if data.get('score') == 0:
            zero_scores[data.get('image_idx', -1)] += 1

print('Score=0 ë°œìƒ ì´ë¯¸ì§€:')
for idx, count in zero_scores.most_common():
    print(f'  idx={idx}: {count}íšŒ')
"
```

### 5. ìµœì¢… ë¬¸ì„œí™”
- ì‹¤í—˜ ê²°ê³¼ë¥¼ ë…¼ë¬¸ìš©ìœ¼ë¡œ ì •ë¦¬
- Figure ìƒì„± (ìˆ˜ë ´ ê·¸ë˜í”„)
- ê°œì„ ìœ¨ ê³„ì‚° ë° ì •ë¦¬

---

## ì½”ë“œ ë³€ê²½ì‚¬í•­

### optimization.py
- **ì œì™¸ ë¡œì§ ì œê±°**: EXCLUDE_INDICES ì½”ë“œ ì‚­ì œ
- **í˜„ì¬ ìƒíƒœ**: ë¬¸ì œ ì´ë¯¸ì§€ê°€ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì œê±°ë˜ì–´ ìë™ìœ¼ë¡œ ì œì™¸ë¨

### evaluation.py
- **threshold**: 20px (Line 21)

---

## íŒŒì¼ ìœ„ì¹˜

### ë¡œê·¸
- **í˜„ì¬ ì‹¤í—˜**: `logs/run_20251120_151025/`
- **ì´ì „ ì‹¤í—˜**: `logs/run_20251120_004752/`

### ê²€ì¦ ë°ì´í„°
- **ëª©ë¡**: `validation_images.json` (246 images)

### í™˜ê²½ íŠ¹ì§•
- **íŒŒì¼**: `environment_top6.json`
- **On-the-fly ì¶”ì¶œ**: 487ê°œ ì´ë¯¸ì§€ (113ê°œëŠ” JSONì— ìˆìŒ)

---

## ì¤‘ìš” ë°œê²¬ì‚¬í•­

### 1. ë¬¸ì œ ì´ë¯¸ì§€ ì œê±° íš¨ê³¼
- **Before**: score=0 ë°œìƒ â†’ CVaR ìš”ë™
- **After**: ì•ˆì •ì ì¸ í‰ê°€ ì˜ˆìƒ

### 2. Threshold 20px íš¨ê³¼
- Initial CVaR ë‚®ì•„ì§ (0.70 â†’ 0.5852)
- ë” ì—„ê²©í•œ í‰ê°€ë¡œ ê°œì„  ì—¬ì§€ ì¦ê°€

### 3. Cumulative Best ì ìš©
- ìì—°ìŠ¤ëŸ¬ìš´ ìˆ˜ë ´ ê·¸ë˜í”„ ì˜ˆìƒ
- Initial best = 0.5852ì—ì„œ ì‹œì‘

---

## ê¸°ëŒ€ ê²°ê³¼

### Best Case
- **Best CVaR**: 0.70+ (20% ê°œì„ )
- **ì•ˆì •ì  ìˆ˜ë ´**: ìš”ë™ ì—†ì´ ì ì§„ì  ìƒìŠ¹
- **Score=0**: ì—†ìŒ

### Worst Case
- **Best CVaR**: 0.65 (11% ê°œì„ )
- **ì•½ê°„ì˜ ìš”ë™**: ì¼ë¶€ ìˆìœ¼ë‚˜ ì´ì „ë³´ë‹¤ ê°ì†Œ
- **Score=0**: ê°€ë” ë°œìƒ

### ëª©í‘œ
- **ê°œì„ ìœ¨**: 10% ì´ìƒ (0.64+)
- **ì•ˆì •ì„±**: ìš”ë™ ìµœì†Œí™”
- **ì™„ì„±ë„**: ë…¼ë¬¸ Figure ìƒì„± ê°€ëŠ¥

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-20 15:20
**ì‹¤í—˜ ìƒíƒœ**: Initial sampling ì™„ë£Œ, BO iterations ì§„í–‰ ì¤‘
**ë‹¤ìŒ í™•ì¸ ì‹œê°„**: 30-60ë¶„ í›„
