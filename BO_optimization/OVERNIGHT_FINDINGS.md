# 야간 실험 발견사항 (2025-11-13)

## 실험 진행 상황

### 진행 중인 실험

**실험 1**: 안정성 확인 (느림)
- alpha=0.3, n_w=15, iterations=20, n_initial=10
- 상태: 진행 중 (Initial sampling이 매우 느림)
- 프로세스 ID: 7710ce
- 문제: 150개 초기 평가 → 예상 2-3시간

**실험 2**: 효율적 설정
- alpha=0.2, n_w=3, iterations=100, n_initial=5
- 상태: 정상 시작됨
- 프로세스 ID: ccd3dc
- 예상: 75개 초기 평가 → 훨씬 빠름

---

## 주요 발견사항

### 1. n_w 크기의 영향 (중요!)

**기존 18개 실험 결과 분석**:
- 전체 실험: 18개 (모두 alpha=0.3)
- 평균 CVaR: 0.7318
- 최고 CVaR: 0.9924

**n_w별 성능**:

| n_w | 실험 수 | 평균 CVaR | 최고 CVaR | 경향 |
|-----|--------|-----------|-----------|------|
| 3 | 13 | 0.77 | 0.9924 | ✅ 최고 성능 |
| 5 | 2 | 0.50 | 0.5681 | ⚠️ 중간 |
| 8 | 2 | 0.81 | 0.8146 | 🟢 양호 |
| 15 | 1 | 0.64 | 0.6410 | ❌ 낮음 |

**결론**: **n_w=3이 가장 효과적!**
- n_w가 클수록 성능 하락
- n_w=3: 샘플링 효율성 vs 다양성의 균형

### 2. n_initial의 부하 문제

**관찰**:
- n_initial=10, n_w=15 → 150개 초기 평가
- 각 평가 약 1-2분 → 총 150-300분 (2.5-5시간!)

**개선**:
- n_initial=5, n_w=3 → 15개 초기 평가
- 훨씬 빠른 시작 가능

**최적 설정**:
- n_initial: 5-7
- n_w: 3
- iterations: 100-200

### 3. 최고 성능 파라미터

**최고 성능 실험** (CVaR=0.9924):
```
파일: bo_cvar_20251113_023339.json
alpha: 0.3
n_w: 3
iterations: 2

Best parameters:
  edgeThresh1: -19.6107
  simThresh1: 0.5252
  pixelRatio1: 0.1205
  edgeThresh2: -16.9929
  simThresh2: 0.8271
  pixelRatio2: 0.0419
  ransac_weight_q: 18.5271
  ransac_weight_qg: 17.4182
```

**파라미터 패턴** (상위 5개 평균):
- edgeThresh1: -15 ~ -20 (낮은 값)
- simThresh1: 0.5 ~ 0.75 (중간 값)
- pixelRatio1: 0.06 ~ 0.12 (중간 값)
- edgeThresh2: -15 ~ -20 (낮은 값)
- simThresh2: 0.6 ~ 0.87 (높은 값)
- pixelRatio2: 0.04 ~ 0.12 (중간 값)
- ransac_weight_q: 9 ~ 19 (높은 값)
- ransac_weight_qg: 9 ~ 19 (높은 값)

---

## 다음 실험 계획

### Alpha 집중 실험 (n_w=3, iter=100 고정)

**실험 대기열**:
1. ✅ alpha=0.2 (진행 중)
2. 🔜 alpha=0.1
3. 🔜 alpha=0.15
4. 🔜 alpha=0.25
5. 🔜 alpha=0.35
6. 🔜 alpha=0.4
7. 🔜 alpha=0.5

**목표**: Alpha 값이 CVaR 최적화에 미치는 영향 정량화

---

## 환경 파라미터 분석 (예정)

### 분석 필요 사항

1. **환경 특징 유의미성**:
   - brightness, contrast, edge_density 등 6개 특징
   - 어떤 특징이 성능에 가장 영향?

2. **환경 파라미터 상관관계**:
   - 특징 간 상관계수 분석
   - 중복 특징 제거 가능?

3. **w_set 샘플링 다양성**:
   - 현재 랜덤 샘플링이 적절한가?
   - 클러스터링 기반 샘플링?

---

## 문제 상황

### 1. Initial Sampling 속도 (긴급!)

**문제**:
- n_initial × n_w 개 평가 필요
- 각 평가 1-2분 소요
- n_initial=10, n_w=15 → 2.5-5시간!

**해결책**:
- ✅ n_initial 줄이기 (5-7)
- ✅ n_w 줄이기 (3-5)
- 추가: 평가 속도 최적화?

### 2. n_w가 클 때 성능 하락

**가설**:
1. 샘플링 다양성 과다 → 수렴 느림
2. 적은 데이터로 15D GP 학습 어려움
3. 환경 특징 6D가 충분히 구별력 없음?

**검증 필요**:
- n_w=[3, 5, 8, 10] 체계적 비교
- 환경 특징 재검토

### 3. 병렬 실행 안정성

**우려**: 동시 실행 시 프로세스 충돌 가능
**대응**:
- 30분간 모니터링
- 안정적이면 3-4개 병렬 실행
- 불안정하면 순차 실행

---

## 예상 타임라인

### 현재 시간: 2025-11-13 04:34 (한국 시간 추정)

**실험 1** (n_init=10, n_w=15):
- 시작: 03:16
- 예상 완료: 05:00-08:00 (2-5시간 더)

**실험 2** (n_init=5, n_w=3):
- 시작: 04:33
- 예상 완료: 05:00-06:00 (30분-1시간)

**추가 실험**:
- 실험 2 완료 후 순차 시작
- 각 실험 30분-1시간 예상
- 7개 실험 → 총 3.5-7시간

**아침 (08:00) 예상 결과**:
- 실험 1: 완료 or 거의 완료
- 실험 2-4: 완료
- 총 3-4개 alpha 값 테스트 완료

---

## 졸업을 위한 체크리스트

### 필수 완료 항목

- [x] BoRisk 알고리즘 정상 구현 (판타지 관측 포함)
- [x] Full KG 활성화
- [x] 1개 평가 구조 구현
- [ ] Alpha 영향도 분석 (3개 이상 alpha 값)
- [ ] 환경 파라미터 유의미성 분석
- [ ] 최적 파라미터 도출
- [ ] 결과 시각화 (Figure)

### 논문용 데이터

- [ ] 다양한 alpha에서의 CVaR 비교
- [ ] 수렴 곡선 (iterations vs CVaR)
- [ ] 파라미터 민감도 분석
- [ ] 환경 특징 영향도

---

**마지막 업데이트**: 2025-11-13 04:34
**다음 확인**: 05:00 (실험 2 완료 예상)
**상태**: 🟢 실험 진행 중, 유의미한 인사이트 발견!

**화이팅! 졸업하자! 🎓**
