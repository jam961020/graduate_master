# 문제 상황 및 해결책 (2025-11-13)

## 🚨 발생한 문제들

### 1. 백그라운드 프로세스 실패 (치명적!)

**문제**:
- 두 개의 백그라운드 프로세스를 동시에 실행
- 둘 다 exit_code 127로 실패
- 프로세스가 중간에 뻗음

**원인**:
- Windows Git Bash 환경의 백그라운드 프로세스 관리 한계
- 사용자 예상: "동시에 돌리면 프로세스가 뻗는다"

**해결책**:
- ✅ **순차 실행**: 하나씩 완료 후 다음 실험
- ✅ **더 짧은 실험**: iterations=30 (100X)
- ✅ **작은 n_initial**: 5 (10X)
- ✅ **작은 n_w**: 3 (15X)

---

### 2. Initial Sampling 속도 (심각!)

**문제**:
- n_initial=10, n_w=15 → 150개 평가
- 각 평가 1-2분 → 총 2.5-5시간!
- Init 2/10 완료 전에 프로세스 실패

**관찰**:
- Init 1/10 완료: 15분
- Init 2/10 진행 중: 40분 이상 소요 (미완료)

**해결책**:
- ✅ n_initial 줄이기: 5 (50% 감소)
- ✅ n_w 줄이기: 3 (80% 감소)
- 효과: 150개 → **15개 평가** (10배 빠름!)

---

### 3. n_w 크기에 따른 성능 차이 (중요 발견!)

**문제**:
- n_w=15일 때 성능 저하 (CVaR 0.64)
- n_w=3일 때 최고 성능 (CVaR 0.99)

**데이터**:
| n_w | 평균 CVaR | 최고 CVaR |
|-----|-----------|-----------|
| 3 | 0.77 | 0.9924 |
| 5 | 0.50 | 0.5681 |
| 8 | 0.81 | 0.8146 |
| 15 | 0.64 | 0.6410 |

**가설**:
1. n_w가 클수록 환경 다양성은 증가하지만, 수렴 느려짐
2. GP 학습에 필요한 데이터 부족 (적은 iteration)
3. 환경 특징 6D가 충분히 구별력 없을 수 있음

**해결책**:
- ✅ **n_w=3 고정** (최적값)
- 추후: 환경 특징 재검토

---

### 4. 실험 시간 예측 실패

**예상**:
- 전체 실험 (113 이미지, 20 iter) → 2-3시간

**실제**:
- Initial sampling만 2-5시간
- 프로세스 실패로 완료 못 함

**해결책**:
- ✅ 더 현실적인 설정: n_init=5, n_w=3, iter=30
- 예상 시간: 1-1.5시간 (훨씬 빠름!)

---

## 📊 기존 실험 분석 결과

### 성공 사례들 (n_w=3)

**최고 성능** (CVaR=0.9924):
- iterations: 2 (매우 짧음!)
- n_w: 3
- alpha: 0.3

**상위 5개 평균** (CVaR > 0.99):
- 모두 n_w=3
- iterations: 2-5 (짧음!)
- alpha: 0.3

**결론**: **적은 iterations + n_w=3이 효과적!**

### 파라미터 패턴

**공통 패턴** (상위 5개):
- edgeThresh1: **-15 ~ -20** (낮음)
- simThresh1: **0.5 ~ 0.75** (중간)
- pixelRatio1: **0.06 ~ 0.12** (중간)
- edgeThresh2: **-15 ~ -20** (낮음)
- simThresh2: **0.6 ~ 0.87** (높음)
- pixelRatio2: **0.04 ~ 0.12** (중간)
- ransac_weight_q: **9 ~ 19** (높음)
- ransac_weight_qg: **9 ~ 19** (높음)

---

## 🔄 수정된 실험 계획

### 새로운 설정

**기본 설정**:
- iterations: 30 (충분함, 기존 결과 기준)
- n_initial: 5 (부하 감소)
- n_w: 3 (최적값)

**Alpha 테스트**:
1. ✅ alpha=0.2 (진행 중)
2. 🔜 alpha=0.1
3. 🔜 alpha=0.15
4. 🔜 alpha=0.25
5. 🔜 alpha=0.3 (재검증)
6. 🔜 alpha=0.35
7. 🔜 alpha=0.4
8. 🔜 alpha=0.5

**예상 시간**:
- 각 실험: 1-1.5시간
- 8개 실험: 8-12시간
- 순차 실행 (안전성 확보)

---

## 💡 학습한 교훈

### 1. 작은 것이 아름답다!
- n_w=3 > n_w=15 (성능도 좋고 빠름!)
- iterations=2-5도 충분 (30이면 여유)

### 2. 환경의 중요성
- Windows Git Bash는 백그라운드 병렬 실행에 취약
- 순차 실행이 안전

### 3. 초기 평가의 병목
- n_initial × n_w = 치명적 병목
- 최소화 필요

### 4. 빠른 실험 > 완벽한 실험
- 짧고 많은 실험 > 길고 완벽한 실험
- 다양한 alpha 테스트가 중요

---

## 🎯 아침까지 목표

### 현실적 목표

**완료 가능**:
- ✅ 문제 분석 및 해결책 도출
- ✅ 실험 설정 최적화 (n_w=3, n_init=5)
- 🔄 Alpha 실험 4-6개 완료 (순차 실행)
- 🔄 환경 파라미터 분석
- 🔄 최종 리포트 작성

**완료 어려움**:
- ❌ 8개 alpha 모두 완료 (시간 부족)
- ❌ 100+ iterations (불필요)

### 우선순위

1. **Alpha 0.1-0.4 테스트** (4개 이상)
2. **환경 파라미터 분석**
3. **결과 시각화 및 정리**
4. **졸업 가능 수준의 데이터 확보**

---

## 🚀 다음 액션

### 즉시 실행

1. ✅ alpha=0.2 실험 모니터링 (진행 중)
2. 완료 시 alpha=0.1, 0.15, 0.25 순차 실행
3. 각 실험 완료 후 결과 즉시 분석
4. 환경 파라미터 분석 스크립트 실행

### 백업 플랜

**실험이 계속 실패하면**:
- Iterations 더 줄이기 (10-15)
- 작은 데이터셋 테스트 (30-50 이미지)
- 직접 실행 (백그라운드 X)

---

**마지막 업데이트**: 2025-11-13 05:06
**현재 상태**: ⚠️ 문제 해결 중, 새 실험 진행 중
**다음 확인**: 05:20 (15분 후)

**우리는 할 수 있다! 졸업하자! 🎓**
